<%= form.semantic_errors %>

<%= form.inputs do %>
  <%= form.input :name %>

  <%= form.semantic_fields_for :settings do | setting | %>
    <% case setting.object.key %>
    <% when 'sort' %>
      <%= setting.input :value, :label => setting.object.key, :as => :select, :collection => [['Published Date', 'published_at desc'], ['Title', 'title asc']] %>
    <% when 'per_page' %>
      <%= setting.input :value, :label => 'Per page' unless settings.get('pagination') == 'off' %>
    <% else %>
      <%= setting.input :value, :label => setting.object.key %>
    <% end %>
  <% end %>

  <%= form.input :parent_id, :as => :select, :collection => nested_set_options(Node, @node) { |i, level | "#{'--' * level} #{i.name}" }, :include_blank => true, :hint => 'Only change this if you wish to move a category' %>
<% end %>


<%= form.buttons do %>
  <%= form.commit_button :button_html => { :disable_with => 'Please wait...' } %>
<% end %>

<%= link_to 'Back', [:qwerty_admin, :nodes] %>
